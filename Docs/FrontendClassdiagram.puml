@startuml

class Program {
    
}

package "ServiceExtensions" {
    class NetworkConnection {
        +SetupBackendConnection(services : this IServiceCollection) : IServiceCollection
    }
    class ValidationSettings {
        +AddValidationSettings(services : this IServiceCollection, builder : WebApplicationBuilder) : IServiceCollection
    }
}

Program ..> NetworkConnection
Program ..> ValidationSettings

package "Shared" {
    class MainLayout {
    -body : RadzenBody
    -sidebarExpanded : bool
    }
}

package "Pages (view, viewmodel)" {
    class Home {}
    class PCBAInfo {
        -pcbaUid : int
        -SearchActuator() : Task
    }
}

MainLayout ..> PCBAInfo
MainLayout ..> Home

package "Components" {
    class SerialNumberInputValidator {
        +RegexText : string
        +RegexPattern : string
        +OnInitialized() : void
    }
    
    class WorkOrderNumberInputValidator {
        +RegexText : string
        +RegexPattern : string
        +OnInitialized() : void
    }
}

package "Entities" {
    class Actuator {
        +WorkOrderNumber : int
        +SerialNumber : int
    }
    
    class PCBA {
        +PCBAUid : int
    }
    
    Actuator o-- PCBA : +PCBA
}

package "Model" {
    interface IActuatorDetailsModel {
        +GetActuatorDetails(woNo : int, serialNo : int) : Task<Actuator>
    }
    
    class ActuatorDetailsModel {
        +ActuatorDetailsModel(network : INetworkAdapter)
    }
    
    IActuatorDetailsModel <|.. ActuatorDetailsModel
}

package "NSwagServiceAdapter" {
    interface INetworkAdapter {
        +GetActuatorDetails(woNo : int, serialNo : int) : Task<GetActuatorDetailsResponse>
    }
    
    class NSwagAdapter {
        +NSwagAdapter(clientFactory : IHttpClientFactory, configuration : IConfiguration)
    }
    
    INetworkAdapter <|.. NSwagAdapter
}

package "Service" {
    package "NSwagService" {
        class Client <<auto-generated>> {
            -_baseUrl : string
            -_httpClient : HttpClient
            -_settings : JsonSerializerSettings      
            +Client(baseUrl : string, httpClient : HttpClient) 
            +GetActuatorDetailsAsync(wONo : int, serialNo : int, cancellationToken : CancellationToken) : Task<GetActuatorDetailsResponse>
        }
        
        class GetActuatorDetailsResponse <<auto-generated>> {
            +PcbaUid : int
        }
        
        Client ..> GetActuatorDetailsResponse
    }
    
    interface IAlertService {
        +FireEvent(type : AlertType)
    }
    
    class AlertService {
        +AlertService(messages : IAlertMessages)
    }
    
    IAlertService <|.. AlertService
    
    class AlertAction <<delegate>> {}
    class OnAlertAction <<event>> {}
    
    AlertService --> AlertAction : +AlertAction
    AlertService --> OnAlertAction : +OnAlertAction
}

package "Events" {
    interface IAlertMessages {
        +ActuatorDetailsSuccess() : Alert
        +ActuatorDetailsFailure() : Alert
    }
    
    class AlertMessages {
    }
    
    IAlertMessages <|.. AlertMessages
    
    class Alert {
        +IsSuccessful : bool
        +Message : string
        +Type : AlertType
    }
    
    enum AlertType {
        ActuatorDetailsSuccess
        ActuatorDetailsFailure
    }
    
    Alert ..> AlertType
    AlertMessages ..> Alert : <<creates>>
}

PCBAInfo --> Actuator : -actuator
PCBAInfo --> IActuatorDetailsModel : +ActuatorDetailsModel
PCBAInfo ..> SerialNumberInputValidator : <<includes>>
PCBAInfo ..> WorkOrderNumberInputValidator : <<includes>>
ActuatorDetailsModel --> INetworkAdapter : +NetworkAdapter
NSwagAdapter --> Client : -_client
AlertService --> Events.IAlertMessages : -_messages
NSwagAdapter --> IAlertService : -_alertService
Client ..> backend
note right on link
    RESTful
end note
Program ..> IActuatorDetailsModel
Program ..> IAlertMessages
Program ..> IAlertService

@enduml